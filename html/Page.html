<html>
<meta charset="UTF-8">
<head>
	<title>Rubics</title>

		<div id="gameMan">
			<h2>Use the arrow keys to navigate around the board and "WASD" keys to move the row and columns.</h2>
			<h2>Use "ESC" to return to this menu. Hit 'r' to save your board and try to make it.</h2>
		</div>

	<script type="text/javascript">
	function hideBut() {
        document.getElementById("resumeButton").style.display = 'none';
    }
    function selectionChanged(){
        let sizeSelector = document.getElementById("gameSize");
		let difficultySelector = document.getElementById("difficulty");
	    if(gameSize == Number(sizeSelector.options[sizeSelector.selectedIndex].value) &&
	    			difficulty == difficultySelector.options[difficultySelector.selectedIndex].innerHTML){
            document.getElementById("startButton").value = "Restart";
            document.getElementById("resumeButton").style.display = 'inline';
        }else{
            document.getElementById("startButton").value = "Start";
            document.getElementById("resumeButton").style.display = 'none';
        }
	}
	</script>

	<script src="../bower_components/file-saver/FileSaver.js"></script>
	<link rel="stylesheet" type="text/css" href="../css/design.css">
</head>
<body onload="hideBut(); initMenu();">
	<table id="gameMenu">
		<tr>
			<td align="center">Game Size</td>
			<td>
			<div class="sizeButtons">
				<div class="overlay border">
					<div class="insideText" id="three">3 X 3</div>
					<img src="../res/grid3.png" class="toggleButton" value="3" onclick="setGameSize(this)"></img>
				</div>
				<div class="overlay">
					<div class="insideText" id="four">4 X 4</div>
					<img src="../res/grid4.png" class="toggleButton" value="4" onclick="setGameSize(this)"></img>
				</div>
				<div class="overlay">
					<div class="insideText" id="five">5 X 5</div>
					<img src="../res/grid5.png" class="toggleButton" value="5" onclick="setGameSize(this)"></img>
				</div>
				<div class="overlay">
					<div class="insideText" id="six">6 X 6</div>
					<img src="../res/grid6.png" class="toggleButton" value="6" onclick="setGameSize(this)"></img>
				</div>
			</div>
			</td>
		</tr>

		<tr>
			<td align="center">Selector Speed</td>
			<td>
			<div class="speedButtons">
				<div class="animatedContainer">
					<canvas class="animatedCanvas" selected="false" value="2" onmouseout="resetAnimatedCanvas(this, 0)" 
						onmouseover="animateMenuSelectorGrid(this, 0);" onclick="setSelectorSpeed(this, 0)">
				</div>
				<div class="animatedContainer">
					<canvas class="animatedCanvas" selected="false" value="4" onmouseout="resetAnimatedCanvas(this, 1)"
						onmouseover="animateMenuSelectorGrid(this, 1);" onclick="setSelectorSpeed(this, 1)">
				</div>
				<div class="animatedContainer">
					<canvas class="animatedCanvas" selected="false" value="8" onmouseout="resetAnimatedCanvas(this, 2)"
						onmouseover="animateMenuSelectorGrid(this, 2);" onclick="setSelectorSpeed(this, 2)">
				</div>
				<div class="animatedContainer">
					<canvas class="animatedCanvas" selected="false" value="0" onmouseout="resetAnimatedCanvas(this, 3)" 
						onmouseover="animateMenuSelectorGrid(this, 3);" onclick="setSelectorSpeed(this, 3)">
				</div>
			</div>
			</td>
		</tr>

		<tr>
			<td align="center">Difficulty</td>
			<td>
			<div class="difficultyButtons">
				<div class="overlay first">
					<div class="difficultyText">Easy</div>
					<img src="../res/smileyEasy.png" class="toggleButton" value="Easy" onclick="setDifficulty(this)"></img>
				</div>
				<div class="overlay">
					<div class="difficultyText">Medium</div>
					<img src="../res/smileyMedium.png" class="toggleButton" value="Medium" onclick="setDifficulty(this)"></img>
				</div>
				<div class="overlay">
					<div class="difficultyText">Hard</div>
					<img src="../res/smileyHard.png" class="toggleButton" value="Hard" onclick="setDifficulty(this)"></img>
				</div>
				<div class="overlay">
					<div class="difficultyText">Expert</div>
					<img src="../res/smileyExpert.png" class="toggleButton" value="Expert" onclick="setDifficulty(this)"></img>
				</div>				
			</td>
		</tr>

		<tr>
			<script type="text/javascript">
				//TODO:refurnish this, it's a shit structure
                function resumeGame() {
                    document.getElementById("gameMan").style.display = 'none';
                    let el = document.getElementById("gameSize");

                    if(gameSize == Number(el.options[el.selectedIndex].value)){
                        //hide menu
                        gameMenu = document.getElementById("gameMenu");
                        gameMenu.style.display = 'none';
                        movement = false;

                        el = document.getElementById("selSpeed");
                        selectorSpeed = Number(el.options[el.selectedIndex].value);

                        //show game canvas'
                        Rubics.gameCanvas.style.display = 'inline';
                        Rubics.infoCanvas.style.display = 'inline';
					}else{
                        startGame();
					}
                }
			</script>
			<td><button id="resumeButton" onclick="resumeGame()"><span>Resume</span></button></td>
			<td><button id="startButton" onclick="startGame()"><span>Start</span></button></td>
		</tr>

	</table>

	<script type="text/javascript" src="../js/MenuController.js"></script>
    <script type="text/javascript" src="../js/InfoCanvas.js"></script>
    <script type="text/javascript" src="../js/script.js"></script>
	<script type="text/javascript" src="../js/EventController.js"></script>
	<script type="text/javascript" src="../js/Selector.js"></script>
</body>
</html>